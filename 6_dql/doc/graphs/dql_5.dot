digraph dql {
    graph[dpi=300]
    rankdir="BT"

    s [label="Állapot", shape="rectangle"]
    net [label="Neurális hálózat", shape="rectangle"]
    vsnet [label="Specifikus\nhálózat", shape="rectangle"]
    qsanet [label="Specifikus\nhálózat", shape="rectangle"]
    vs [label="V(s)", shape="rectangle"]

    subgraph cluster1{
        style="dotted"
        a1 [label=<A(s,a<sub><font point-size="10">1</font></sub>)>, shape="rectangle"]
        a2 [label=<A(s,a<sub><font point-size="10">3</font></sub>)>, shape="rectangle"]
        a3 [label=<A(s,a<sub><font point-size="10">2</font></sub>)>, shape="rectangle"]  
    }
    
    subgraph cluster2{
        style="dotted"
        q1 [label=<Q(s,a<sub><font point-size="10">1</font></sub>)>, shape="rectangle"]
        q2 [label=<Q(s,a<sub><font point-size="10">3</font></sub>)>, shape="rectangle"]
        q3 [label=<Q(s,a<sub><font point-size="10">2</font></sub>)>, shape="rectangle"]  
    }

    a1 -> q1
    vs -> q1
    a2 -> q2
    vs -> q2
    a3 -> q3
    vs -> q3
    vsnet -> vs
    qsanet -> a1
    qsanet -> a2
    qsanet -> a3
    net -> vsnet
    net -> qsanet
    s -> net
}